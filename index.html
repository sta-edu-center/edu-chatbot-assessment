<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>êµìœ¡ ì´ìˆ˜ í‰ê°€ ì±—ë´‡</title>

<style>
/* ===== ê¸°ë³¸ ìŠ¤íƒ€ì¼ ===== */
body {
  margin: 0;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
  background: #f6f7fb;
}
.container {
  max-width: 900px;
  margin: 30px auto;
  background: #fff;
  border-radius: 14px;
  box-shadow: 0 10px 30px rgba(0,0,0,.08);
  overflow: hidden;
}
.header {
  padding: 16px 20px;
  border-bottom: 1px solid #e5e7eb;
  display: flex;
  justify-content: space-between;
  align-items: center;
}
.title {
  font-weight: 800;
}
#adminBtn {
  display: none;
  border: none;
  background: transparent;
  font-size: 18px;
  cursor: pointer;
  opacity: .6;
}
#adminBtn:hover { opacity: 1; }

.chat {
  height: 420px;
  overflow-y: auto;
  padding: 20px;
  background: #fafafa;
}
.msg {
  margin-bottom: 12px;
  display: flex;
}
.msg.bot { justify-content: flex-start; }
.msg.user { justify-content: flex-end; }

.bubble {
  max-width: 75%;
  padding: 12px 14px;
  border-radius: 14px;
  border: 1px solid #e5e7eb;
  background: #f1f5f9;
  white-space: pre-line;
  font-size: 14px;
}

/* ===== ê²°ê³¼ ë§í’ì„  (í•µì‹¬) ===== */
.bubble.result { font-weight: 700; }

.bubble.result.pass {
  background: #ecfdf5;
  border-color: #22c55e;
  color: #065f46;
}

.bubble.result.fail {
  background: #fef2f2;
  border-color: #ef4444;
  color: #7f1d1d;
}

.footer {
  padding: 14px 20px;
  border-top: 1px solid #e5e7eb;
}
button {
  padding: 10px 14px;
  border-radius: 10px;
  border: none;
  background: #2563eb;
  color: #fff;
  font-weight: 700;
  cursor: pointer;
}
</style>
</head>

<body>
<div class="container">
  <div class="header">
    <div class="title">êµìœ¡ ì´ìˆ˜ í‰ê°€</div>
    <button id="adminBtn" title="ê´€ë¦¬ì ì„¤ì •">âš™ï¸</button>
  </div>

  <div id="chat" class="chat"></div>

  <div class="footer">
    <button onclick="finishTest()">ê°•ì œ ì¢…ë£Œ(í…ŒìŠ¤íŠ¸)</button>
  </div>
</div>

<script>
/* ===== admin=true ì¼ ë•Œë§Œ ì•„ì´ì½˜ í‘œì‹œ ===== */
const params = new URLSearchParams(location.search);
if (params.get("admin") === "true") {
  document.getElementById("adminBtn").style.display = "inline-block";
}

/* ===== ì±„íŒ… ìœ í‹¸ ===== */
const chat = document.getElementById("chat");

function addBubble(text, role = "bot") {
  const msg = document.createElement("div");
  msg.className = "msg " + role;

  const bubble = document.createElement("div");
  bubble.className = "bubble";
  bubble.innerText = text;

  msg.appendChild(bubble);
  chat.appendChild(msg);
  chat.scrollTop = chat.scrollHeight;

  return bubble; // â­ ë§¤ìš° ì¤‘ìš”
}

/* ===== í…ŒìŠ¤íŠ¸ ì¢…ë£Œ ë¡œì§ (ê²°ê³¼ ë§í’ì„  ìƒ‰ ë³€ê²½) ===== */
function finishTest() {
  const score = 50;        // ì˜ˆì‹œ ì ìˆ˜
  const passScore = 80;
  const pass = score >= passScore;
  const resultLabel = pass ? "PASS" : "FAIL";

  addBubble("ëª¨ë“  ë¬¸í•­ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤ âœ…", "bot");

  const bubble = addBubble(
    `ì´ì : ${score}ì \nê²°ê³¼: ${resultLabel}\n(ê¸°ì¤€: ${passScore}ì  ì´ìƒ Pass)`,
    "bot"
  );

  // â­ Pass / Fail ìƒ‰ìƒ ì ìš©
  bubble.classList.add("result");
  bubble.classList.add(pass ? "pass" : "fail");

  addBubble("ì‘ë‹µì„ ì €ì¥ ì¤‘ì…ë‹ˆë‹¤â€¦", "bot");
}

/* ===== ì´ˆê¸° ë©”ì‹œì§€ ===== */
addBubble("ì•ˆë…•í•˜ì„¸ìš”! í‰ê°€ë¥¼ ì‹œì‘í•´ì£¼ì„¸ìš” ğŸ˜Š", "bot");
</script>
</body>
</html>
